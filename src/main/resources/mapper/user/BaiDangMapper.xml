<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.htt.batdongsan.mapper.BaiDangMapper">
   
     <insert id="insert" parameterType="BaiDangModel" >
     INSERT INTO  bai_dang  (danh_muc_id , title ,  content ,  money ,  dien_tich ,  city_id ,  huyen_id ,  xa_id ,  duong_id ,  mat_tien ,  duong_vao_m ,  huong_nha ,  thong_tin_lien_he ,  start_day ,  end_day ,  status ,  actived ,  mo_ta_tong_quat ,  loai_bat_dong_san_id ,  dia_chi_chi_tiet ,  so_nha_ve_sinh ,  so_phong_ngu ,  so_tang ) 
	VALUES (#{danh_muc_id}, #{title}, #{content},#{money},#{dien_tich},#{city_id}, #{huyen_id}, #{xa_id}, #{duong_id}, #{mat_tien}, #{duong_vao_m},#{huong_nha}, #{thong_tin_lien_he},  #{start_day}, #{end_day},#{status}, #{actived}, #{mo_ta_tong_quat},#{loai_bat_dong_san_id}, #{dia_chi_chi_tiet},  #{so_nha_ve_sinh}, #{so_phong_ngu}, #{so_tang})
    </insert>
    
    <select id="selectTop4All" resultMap="result" >
        select * from bai_dang ORDER BY status desc  LIMIT 4
    </select>
    
    <select id="selectAll" resultMap="result" >
        select * from bai_dang where danh_muc_id NOT BETWEEN 18 AND 27 ORDER BY status desc
    </select>
    
    <select id="selectTop4New" resultMap="result" >
        select * from bai_dang ORDER BY start_day desc  LIMIT 4
    </select>
    
     <select id="selectNew" resultMap="result" >
        select * from bai_dang ORDER BY start_day desc
    </select>
    
     <select id="selectTop4DuAn" resultMap="result" >
        select * from bai_dang where 1=1 and status = 1 and danh_muc_id BETWEEN 18 AND 27 ORDER BY start_day desc  LIMIT 4
    </select>
    
     <select id="selectDANB" resultMap="result" >
        select * from bai_dang where 1=1 and status = 1 and danh_muc_id BETWEEN 18 AND 27 ORDER BY start_day desc
    </select>
    
    <select id="selectOne" resultMap="result" parameterType="Integer">
        select * from bai_dang where 1=1 and id= #{id}
    </select>
     <select id="selectWhereDanhMucId" resultMap="result" parameterType="Integer">
        select * from bai_dang where 1=1 and danh_muc_id = #{dmc_id} and status = 1
    </select>
    <select id="selectWhereTPId" resultMap="result" parameterType="Integer">
        select * from bai_dang where 1=1 and city_id = #{city_id} and status = 1
    </select>
    
    <select id="BDSYeuThich" resultMap="result" parameterType="Integer">
    	select *from bai_dang where id in (select bai_dang_id from yeu_thich where user_id = #{id});
    </select>
    
    <select id="BDSChoXacNhan" resultMap="result" parameterType="Integer">
    	select *from bai_dang where user_id = #{id} and status = 0;
    </select>
    
    <select id="BDSChoGiaoDich" resultMap="result" parameterType="Integer">
    	select *from bai_dang where user_id = #{id} and status = 1;
    </select>
    <select id="BDSDayTin" resultMap="result" parameterType="Integer">
    	select *from bai_dang where user_id = #{id} and status = 1 and actived > 0 order by actived
    </select>
    <select id="BDSBiCam" resultMap="result" parameterType="Integer">
    	select *from bai_dang where user_id = #{id} and status = -2
    </select>
    <select id="BDSBiXoa" resultMap="result" parameterType="Integer">
    	select *from bai_dang where user_id = #{id} and status = -1
    </select>
    
    <!-- status = -1 đã xóa,,-2 bị cấm, 0 chờ duyệt, 1 chờ giao dịch, > 1 đang hoạt động:  -->
    <!-- actived >=0, 1 chờ đẩy tin, 0 bình thường, 2 đang đẩy tin, hết thời gian đẩy trả về 0, càng lớn càng có độ ưu tiên cao -->
    
    
   
    
    <resultMap id = "result" type = "BaiDangModel"/>
</mapper>